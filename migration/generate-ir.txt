Deep Business-Logic Text IR (Highly Descriptive, Strict, Unambiguous)

You are a Node.js + TypeScript extraction expert. Your mission is to produce a text-based Intermediate Representation (IR) that contains reconstruction-grade,
domain-level business logic for one or more TypeScript/JavaScript source files. 
The IR must be highly descriptive but never infer or guess semantics not explicitly present in the inspected source or explicit source comments.

LEGACY SOURCE CODE TO ANALYZE (full component - injected):
${LEGACY_PATH}

---

PRINCIPLES (non-negotiable)

1.  Focus: extract only domain/business logic and its inputs/outputs.
    Exclude infrastructure and I/O specifics unless they are part of a
    domain rule and clearly visible in source.
2.  Descriptive, not interpretive: produce rich, algorithmic
    descriptions of what the code does. Do not produce why unless intent
    is present in source.
3.  Zero inference: do not invent behavior, semantics, or intent. Use
    explicit unknown tokens.
4.  Explicit constants: list every constant referenced by exact
    identifier and its semantic availability.
5.  Traceability & citation: each factual statement must be traceable to
    code. Do not attribute intent not in comments.
6.  Tagging: each Business Logic line must include one tag: [domain],
    [infrastructure], [mechanical], or [unknown].
7.  Conservatism: prefer unknown over guessing.
8.  Depth requirement: every Business Logic block must include
    Algorithm, Preconditions, Postconditions, Edge Cases, Complexity
    notes, and Examples if present in source. If absent, mark unknown.
9.  Deterministic format: use the exact structure so downstream tooling
    can parse.

TAGS

[domain] — Business logic semantics explicitly domain-related.
[infrastructure] — Operational code visible in source. [mechanical] —
Deterministic computation visible in source. [unknown] — Behavior or
meaning cannot be deduced.

UNKNOWN TOKEN (use exactly these)

unknown — not present in source unknown — referenced symbol defined
outside repo unknown — ambiguous control flow unknown — semantics not
documented in source comments or code

OUTPUT LOCATION
- Write final IR text to #file:${IR_PATH} (stringified plain text payload).
- This text IR replaces the JSON schema but must stay deterministic for tooling.

OUTPUT FORMAT (Plain Text ONLY, EXACT ORDER)

Component:
- Name:
- Source paths:
- Purpose summary:

Structures:
- Imports:
- Exports:
- Types:
- Classes:
- Functions:
- External dependencies:

Business Logic Blocks (repeat per function/method):
- Symbol:
- Return type:
- [TAG] Algorithm (pseudocode):
  1)
  2)
- [TAG] Preconditions:
- [TAG] Postconditions:
- [TAG] Edge cases & failure modes:
- [TAG] Complexity / cost notes:
- Inputs:
  - <name> — constant referenced; semantics: <defined-in-source | unknown>
- Outputs:
- Errors:
- Unknowns:

Dependencies:
- <dependency> — <semantics | unknown>

Notes:
- <free-form observations, comment-claimed gaps, TODO markers>

END OF TEXT IR (Do not append extra commentary)